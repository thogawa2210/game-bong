<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script type="text/javascript" src="./zim/createjs.min.js"></script>
    <script type="text/javascript" src="./zim//zim.min.js"></script>
    <script type="text/javascript" src="./zim//zim_game.js"></script>
    <script type="text/javascript" src="./zim//box2d.js"></script>
    <script type="text/javascript" src="./zim//zim_physics.js"></script>
    <script type="text/javascript" src="./zim//zim_pizzazz.js"></script>

    <script type="module">
      const frame = new Frame(FIT, 340, 680, "", "", ready);
      var physics;

      const login = false;

      function endGame(scorer) {
        const pane = new Pane({
          modal: false,
          backgroundColor: white,
          content: new Pic("pro/images/game/bg-end.png").siz(300),
          width: 300,
          height: 570,
        });

        if (login) {
          const restart = new Button({
            width: 200,
            height: 100,
            label: "Retry",
            backgroundColor: "#EA7C18",
            color: white,
          })
            .sca(0.4)
            .pos(null, 500, "center", "top", pane)
            .tap(() => {
              restartGame(bar, stage, scorer, bg);
            });
        } else {
          // Nút Save
          const save = new Button({
            width: 200,
            height: 100,
            label: "Save",
            backgroundColor: "#EA7C18",
            color: white,
          })
            .sca(0.4)
            .pos(45, 500, "left", "top", pane)
            .tap(() => {
              // Sẽ thêm sự kiện login ở đây
            });

          // Nút restart
          const restart2 = new Button({
            width: 200,
            height: 100,
            label: "Retry",
            backgroundColor: "#EA7C18",
            color: white,
          })
            .sca(0.4)
            .pos(45, 500, "right", "top", pane)
            .tap(() => {
              restartGame(bar, stage, scorer, bg);
            });
        }

        pane.show();

        // Hiển thị điểm số
        new Label({
          text: Number("12").toLocaleString("en-US"),
          size: 25,
          color: "#EA7C18",
        }).pos(120, 115, "left", "top", pane);
      }

      function ready() {
        // Cái này là stage?
        const stage = frame.stage;

        // Tạo physics để lát sau xoá khi hết màn
        physics = new Physics({ frame: frame });

        // Background
        const bg = new Pic("pro/images/game/back-ground.png")
          .scaleTo(stage)
          .center();

        endGame();
      }
    </script>
  </head>
  <body></body>
</html>
